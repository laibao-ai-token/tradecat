# Datacat Service TODO（严格分层迁移 | 细粒度版）

## 主任务

- [x] 任务 01：原服务方法清点与依赖图（映射表）
- [x] 任务 02：WS K线采集迁移（cryptofeed，含依赖说明）
- [x] 任务 03：REST 指标采集迁移（metrics，含限流策略）
- [x] 任务 04：回填与文件下载迁移（ZIP + REST 拆分）
- [x] 任务 05：配置与入口对齐（与原服务兼容）
- [x] 任务 06：一致性校验执行（依赖任务 11）
- [x] 任务 07：配置矩阵与默认值对齐
- [x] 任务 08：运行模型与入口复制（Scheduler）
- [x] 任务 09：依赖与路径隔离（log/data/ban 状态）
- [x] 任务 10：符号体系与 Alpha 规则
- [x] 任务 11：验收指标与对照样本定义

## 子任务（细化）

- [x] 任务 01-01：逐文件扫描函数/类清单
- [x] 任务 01-02：建立依赖关系图（模块级)
- [x] 任务 01-03：完成映射表（原路径→新路径）

- [x] 任务 02-01：WS wrapper 复用旧逻辑
- [x] 任务 02-02：WS 内聚化（去旧路径 import）
- [x] 任务 02-03：WS 回填依赖落位

- [x] 任务 03-01：Metrics wrapper 复用旧逻辑
- [x] 任务 03-02：Metrics 内聚化
- [x] 任务 03-03：限流/ban 逻辑一致性校验

- [x] 任务 04-01：GapScanner 拆分与落位
- [x] 任务 04-02：ZIP K线回填迁移
- [x] 任务 04-03：ZIP Metrics 回填迁移
- [x] 任务 04-04：REST K线回填迁移
- [x] 任务 04-05：REST Metrics 回填迁移
- [x] 任务 04-06：回填统一入口整理

- [x] 任务 05-01：配置字段对齐与命名策略
- [x] 任务 05-02：入口参数对齐与子进程指向
- [x] 任务 05-03：日志/数据目录绑定

- [x] 任务 06-01：对照运行准备与样本选择
- [x] 任务 06-02：对照数据抽样与字段对齐
- [x] 任务 06-03：生成验收报告

- [x] 任务 07-01：配置矩阵表最终确认
- [x] 任务 07-02：默认值与优先级规则落地
- [x] 任务 07-03：文档同步（README/AGENTS）

- [x] 任务 08-01：Scheduler 复制
- [x] 任务 08-02：子进程命令行对齐
- [x] 任务 08-03：信号处理与退出逻辑对齐

- [x] 任务 09-01：依赖清单更新
- [x] 任务 09-02：路径隔离策略实施
- [x] 任务 09-03：限流状态文件隔离

- [x] 任务 10-01：符号来源优先级实现
- [x] 任务 10-02：ccxt 兜底加载校验
- [x] 任务 10-03：Alpha 缓存与解析迁移

- [x] 任务 11-01：对照样本窗口与符号定义
- [x] 任务 11-02：验收指标与阈值定义
- [x] 任务 11-03：验收报告模板落地

## 扩展（可选）

- [x] 任务 12：统一错误处理规范
- [x] 任务 13：结构化日志规范
- [x] 任务 14：采集器运行基准测试
